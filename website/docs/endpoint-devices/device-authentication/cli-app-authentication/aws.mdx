---
title: AWS CLI authentication
sidebar_label: AWS
tags: [authentik Agent, authentik cli, kubernetes, aws, cli]
---

## Intro

(TODO)

## Prerequisites

You must have [configured your authentik deployment to support the authentik Agent](../../authentik-agent/configuration.md).

## authentik configuration

To support the integration of authentik Agent with AWS CLI, you need to create an application/provider pair in authentik.

### Create an application and provider in authentik for AWS CLI

1. Log in to authentik as an administrator and open the authentik Admin interface.
2. Navigate to **Applications** > **Applications** and click **Create with Provider** to create an application and provider pair. (Alternatively you can first create a provider separately, then create the application and connect it with the provider.)
    - **Application**: provide a descriptive name (e.g. `authentik-kubernetes`), an optional group for the type of application, the policy engine mode, and optional UI settings.
    - **Choose a Provider type**: select **OAuth2/OpenID Connect** as the provider type.
    - **Configure the Provider**: provide a name (or accept the auto-provided name), the authorization flow to use for this provider, and the following required configurations.
        - Set the **Client type** to `Public`.
        - Set the **Client ID** to `authentik-kubernetes`.
        - Select any available signing key.
        - Under **Machine-to-Machine authentication settings** add the `authentik-cli` provider as a **Federated OIDC Provider**.
    - **Configure Bindings** _(optional)_: you can create a [binding](../add-secure-apps/flows-stages/bindings/) (policy, group, or user) to manage access to the application.

3. Click **Submit** to save the new application and provider.

## Usage

(TODO)
