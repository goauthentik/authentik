---
title: Entra ID
support_level: community
tags:
    - source
    - entra
    - azure
    - scim
---

## Preparation

The following placeholders are used in this guide:

- `authentik.company` is the FQDN of the authentik install.

## authentik configuration

To integrate authentik with Entra ID via SCIM you will first need to create a SCIM source in authentik.

### Create SCIM source

1. Log in to authentik as an administrator and open the authentik Admin interface.
2. Navigate to **Directory** > **Federation and Social login**, click **Create**, and then configure the following settings:
    - **Select type**: select **SCIM Source**.
    - **Create SCIM Source**: provide a name and a slug. All other configurations are optional.
3. Click **Finish**.
4. On the **Federation and Social login** page, click on the name of the newly created SCIM source.
5. Take note of the **SCIM Base URL**. This value will be required in the next section.
6. Under **Token**, click **Click to copy token** and securely store the value. This value will also be required in the next section.

:::note Copying the token
If authentik has the required browser permissions, the token will be copied into your clipboard after clicking **Click to copy token** button. However, some browsers don't allow this, in those cases a notification will appear in the bottom right corner with the token and you will need to manually copy it.
:::

## Entra ID configuration

### Create a custom enterprise application

1. Log in to [Entra ID](https://entra.microsoft.com) using a [global administrator](https://learn.microsoft.com/en-us/entra/identity/role-based-access-control/permissions-reference#global-administrator) account.
2. Navigate to **Enterprise apps**, click **Create your own application** and then configure the following fields:
    - **Name**: provide a name for the application (e.g. `authentik-scim`).
    - Select `Integrate any other application you don't find in the gallery (Non-gallery)`.
3. Click **Create**.

### Configure provisioning

4. Navigate to **Provisioning**, click **New Configuration** and then configure the following fields:
    - **Tenant URL**: Set to the **SCIM Base URL** from authentik.
    - **Secret Token**: Set to the **Token** from authentik.
5. Click **Test connection** to validate that Entra ID can communicate with authentik.
6. If the connection is successful, click **Create** and **Save**. If the connection fails, ensure that your authentik **SCIM Base URL** is accessible from the internet.
7. In the left sidebar, under **Manage**, click **Provisioning**.

There are three options to determine which users and groups are provisioned to authentik:

    - Set Entra ID to sync all users and groups
    - Set Entra ID to sync all users and groups with scopes to determine which users and groups are synced
    - Set Entra ID to sync only assigned users and groups (Group assignment is only available to Microsoft Entra Suite, Microsoft Entra ID Governance and Microsoft Entra ID P2 customers)

#### Sync all users and groups

1. On the **Provisioning** page, expand the **Settings** section and then set **Scope** to `Sync all users and groups`.
2. Toggle **Provisioning status** to `On`.
3. At the top of the screen, click **Save**.

#### Sync all users and groups with scopes

1. On the **Provisioning** page, expand the **Settings** section and then set **Scope** to `Sync all users and groups`.
2. At the top of the screen, click **Save**.
3. Expand the **Mappings** section and then click **Provision Microsoft Entra ID Users**.
4. Under **Source Object Scope**

5. On the **Provisioning** page, toggle **Provisioning status** to `On`.
6. At the top of the screen, click **Save**.

#### Sync only assigned users and groups

:::note
Group assignment is only available to Microsoft Entra Suite, Microsoft Entra ID Governance and Microsoft Entra ID P2 customers
:::
