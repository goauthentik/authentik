---
title: Release 2024.5
slug: "/releases/2024.5"
---

:::::note
2024.5 has not been released yet! We're publishing these release notes as a preview of what's to come, and for our awesome beta testers trying out release candidates.

To try out the release candidate, replace your Docker image tag with the latest release candidate number, such as 2024.5.0-rc1. You can find the latest one in [the latest releases on GitHub](https://github.com/goauthentik/authentik/releases). If you don't find any, it means we haven't released one yet.
:::::

## Breaking changes

### PostgreSQL upgrade
The Docker compose PostgreSQL version has been upgraded to v16. You must follow these instructions to upgrade your current database:

1. Dump your existing database using the `docker exec -it authentik-postgresql pg_dumpall -U authentik > upgrade_backup_12.sql` command.
2. Stop your authentik stack by running `docker compose stop`
3. Take a backup of your existing database incase something goes wrong.
    - If you use Docker volumes: `docker volume create database-backup && docker run --rm -v database:/from -v database-backup:/to alpine ash -c "cd /from && cp -a . /to"`
    - If your data is a file path: `cp /path/to/v12-data /path/to/v12-backup`
4. Apply the following modifications to your authentik-postgresql service:
    - Update the image from `docker.io/library/postgres:12-alpine` to `docker.io/library/postgres:16-alpine`
    - Update your volume name or file path.
    - Comment out the network configuration. This will stop authentik from disrupting the upgrade.
5. Pull and recreate your stack: `docker compose pull && docker compose up --build --force-recreate`
6. Apply your backup to the new databse: `cat upgrade_backup_12.sql | docker exec -i authentik-postgresql psql -U authentik`
7. Change the password hashing to scram-sha-256:
    - Exec into your container: `docker exec -it authentik-postgresql /bin/bash`
    - Edit the PostgreSQL configuration (Use the "i" key to enter Insert mode): `vi /var/lib/postgresql/data/postgresql.conf`
    - Uncomment the following line under "Authentication": `password_encryption = scram-sha-256`
    - Save and quit VI by clicking Escape to return to normal mode followed by `:wq`.
    - Run the following command: `psql -U authentik`
    - Run `\password authentik` and enter the password you set for "PG_PASS" in .env
8. Ensure your password and the hashing method have been successfully updated by running the following SQL statement: `SELECT rolname, rolpassword ~ '^SCRAM-SHA-256\$' AS has_upgraded FROM pg_authid WHERE rolcanlogin;`
9. Uncomment the network configuration you made in step 4.
10. Rebuild your stack.

## New features

## Upgrading

This release does not introduce any new requirements.

### docker-compose

To upgrade, download the new docker-compose file and update the Docker stack with the new version, using these commands:

```shell
wget -O docker-compose.yml https://goauthentik.io/version/2024.5/docker-compose.yml
docker compose up -d
```

The `-O` flag retains the downloaded file's name, overwriting any existing local file with the same name.

### Kubernetes

Upgrade the Helm Chart to the new version, using the following commands:

```shell
helm repo update
helm upgrade authentik authentik/authentik -f values.yaml --version ^2024.5
```

## Minor changes/fixes

<!-- _Insert the output of `make gen-changelog` here_ -->

## API Changes

<!-- _Insert output of `make gen-diff` here_ -->
