---
title: Identification stage
---

This stage provides a ready-to-go form for users to identify themselves.

## User Fields

Select which fields the user can use to identify themselves. Multiple fields can be selected. If no fields are selected, only sources will be shown.

- Username
- Email
- UPN

    UPN will attempt to identify the user based on the `upn` attribute, which can be imported with an [LDAP Source](../../../../users-sources/sources/protocols/ldap/index.md)

## Password stage

To prompt users for their password on the same step as identifying themselves, a Password stage can be selected here. If a Password stage is selected in the Identification stage, the Password stage should not be bound to the flow.

## CAPTCHA stage

:::warning
The CAPTCHA stage you use must be configured to use the "Invisible" mode, otherwise the widget will be rendered incorrectly.
:::

To run a CAPTCHA process in the background while the user is entering their identification, a CAPTCHA stage can be selected here. If a CAPTCHA stage is selected in the Identification stage, the CAPTCHA stage should not be bound to the flow.

## Passkey autofill (WebAuthn conditional UI):ak-version[2025.12]

When configured, the Identification stage can offer passkey login directly from the browser's passkey/autofill UI (also known as "conditional UI"). This allows a user to select a passkey without first typing their username.

authentik will automatically fall back to the normal identification flow when passkey autofill is not available.

### Requirements

- **HTTPS** is required for WebAuthn (except on `localhost`).
- **Browser support** for WebAuthn conditional mediation is required.
- Users must have a compatible **discoverable credential (aka resident key)** (most passkeys created by platform authenticators and password managers are discoverable).
- **Correct domain**: users must access authentik using the same hostname the passkey was created for.

### Configuration

1. Log in to authentik as an administrator and open the authentik Admin interface.
2. Navigate to **Flows and Stages** > **Stages** and either create or edit an [Authenticator validation stage](../authenticator_validate/index.mdx) that allows the **WebAuthn** device class.
3. Navigate to **Flows and Stages** > **Stages** and edit your Identification stage. Under **Passkey settings** set **WebAuthn Authenticator Validation Stage** to the Authenticator validation stage from step 2.
4. Click **Update** to save the changes.
5. Ensure users have enrolled a passkey/WebAuthn device (for example using the [WebAuthn / FIDO2 / Passkeys Authenticator setup stage](../authenticator_webauthn/index.mdx)).

### Notes

- The passkey prompt is triggered by the browser when the user focuses the username field.
- If a user has multiple passkeys, the browser will show a picker.
- If passkey login is used, the flow context will have `auth_method` set to `auth_webauthn_pwl`.
- In the default authentication flow blueprint, authentik skips the MFA validation stage after passkey login using an expression policy. If you want passkey login to still require an additional factor, disable or adjust that policy binding on the MFA stage.

### Troubleshooting

- **No passkey prompt appears**
    - Ensure the Identification stage has **WebAuthn Authenticator Validation Stage** set.
    - Ensure you're using **HTTPS** (except on `localhost`).
    - Check browser support for conditional UI.
    - Ensure the login page is not embedded in an iframe as some browsers block conditional UI outside top-level browsing contexts.

- **Passkey prompt appears, but login falls back to username/password**
    - Ensure the referenced Authenticator validation stage allows the **WebAuthn** device class.
    - Ensure the user has a valid, confirmed WebAuthn device enrolled.

## Enrollment/Recovery Flow

These fields specify if and which flows are linked on the form. The enrollment flow is linked as `Need an account? Sign up.`, and the recovery flow is linked as `Forgot username or password?`.

## Pretend user exists:ak-version[2024.2]

When enabled, any user identifier will be accepted as valid (as long as they match the correct format, i.e. when [User fields](#user-fields) is set to only allow Emails, then the identifier still needs to be an Email). The stage will succeed and the flow will continue to the next stage. Stages like the [Password stage](../password/index.md) and [Email stage](../email/index.mdx) are aware of this "pretend" user and will behave the same as if the user would exist.

## Enable "Remember me on this device":ak-version[2025.4]

When enabled, users will be given the option at login of having their username stored on the device. If selected, on future logins this stage will automatically fill in the username and fast-forward to the password field. Users will still have the options of clicking "Not you?" and going back to provide a different username or disable this feature.

## Source settings

Some sources (like the [OAuth Source](../../../../users-sources/sources/protocols/oauth/index.mdx) and [SAML Source](../../../../users-sources/sources/protocols/saml/index.md)) require user interaction. To make these sources available to users, they can be selected in the Identification stage settings, which will show them below the selected [user field](#user-fields).

By default, sources are only shown with their icon, which can be changed with the _Show sources' labels_ option.

Furthermore, it is also possible to deselect any [user field option](#user-fields) for an Identification stage, which will result in users only being able to use currently configured sources.

:::info
Starting with authentik 2023.5, when no user fields are selected and only one source is selected, authentik will automatically redirect the user to that source. This only applies when the **Passwordless flow** option is _not_ configured.
:::

## Flow settings

### Passwordless flow

See [Passwordless authentication](../authenticator_validate/index.mdx#passwordless-authentication).

### Enrollment flow

Optionally can be set to a flow with the designation of _Enrollment_, which will allow users to sign up.

### Recovery flow

Optionally can be set to a flow with the designation of _Recovery_, which will allow users to recover their credentials.
