# Generated by Django 5.1.11 on 2025-07-23 11:26

import authentik.lib.utils.time
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ("authentik_stages_email", "0005_alter_emailstage_token_expiry"),
    ]

    operations = [
        migrations.AddField(
            model_name="emailstage",
            name="recovery_cache_timeout",
            field=models.TextField(
                default="minutes=5",
                help_text="The time window used to count recent account recovery attempts. If the number of attempts exceed recovery_max_attempts within this period, further attempts will be rate-limited. (Format: hours=1;minutes=2;seconds=3).",
                validators=[authentik.lib.utils.time.timedelta_string_validator],
            ),
        ),
        migrations.AddField(
            model_name="emailstage",
            name="recovery_max_attempts",
            field=models.PositiveIntegerField(default=5),
        ),
    ]
